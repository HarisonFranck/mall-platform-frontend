<div class="dashboard-page">
    <!-- Stats Row (Overview) -->
    <div class="overview-stats">
        <div class="stat-mini-card" *ngFor="let stat of stats">
            <div class="stat-icon-small" [style.background-color]="stat.color + '15'">
                <mat-icon [style.color]="stat.color">{{ stat.icon }}</mat-icon>
            </div>
            <div class="stat-details">
                <span class="label">{{ stat.title }}</span>
                <span class="value">{{ stat.value }}</span>
            </div>
        </div>
    </div>

    <!-- Main Grid -->
    <div class="dashboard-main-grid">
        <!-- Left Column: Primary Content -->
        <div class="primary-column">
            <!-- Performance Chart Card -->
            <mat-card class="premium-chart-card">
                <mat-card-header>
                    <mat-card-title>Performance Globale</mat-card-title>
                    <mat-card-subtitle>Analyse du trafic et des interactions (7 derniers jours)</mat-card-subtitle>
                    <div class="header-actions">
                        <button mat-button class="period-btn">Semaine <mat-icon>expand_more</mat-icon></button>
                    </div>
                </mat-card-header>
                <mat-card-content>
                    <div class="mock-line-chart">
                        <div class="chart-axis-y">
                            <span>100</span><span>75</span><span>50</span><span>25</span><span>0</span>
                        </div>
                        <div class="chart-bars-container">
                            <div *ngFor="let val of performanceData" class="chart-bar-wrapper">
                                <div class="chart-bar" [style.height.%]="val">
                                    <div class="bar-tooltip">{{ val }}%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-labels-x">
                        <span>Lun</span><span>Mar</span><span>Mer</span><span>Jeu</span><span>Ven</span><span>Sam</span><span>Dim</span>
                    </div>
                </mat-card-content>
            </mat-card>

            <!-- Secondary Row -->
            <div class="secondary-content-row">
                <!-- Activity Feed -->
                <mat-card class="feed-card">
                    <mat-card-header>
                        <mat-card-title>Flux d'activités</mat-card-title>
                    </mat-card-header>
                    <mat-card-content>
                        <div class="activity-timeline">
                            <div class="timeline-item">
                                <div class="dot success"></div>
                                <div class="content">
                                    <p><strong>L'Artisan Boulanger</strong> a été activé</p>
                                    <span>Il y a 2h • Par Admin</span>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="dot primary"></div>
                                <div class="content">
                                    <p>Nouvelle offre validée : <strong>Soldes d'été</strong></p>
                                    <span>Il y a 5h • Zara</span>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="dot warning"></div>
                                <div class="content">
                                    <p>Maintenance prévue : <strong>Parking B</strong></p>
                                    <span>Demain • Services Techniques</span>
                                </div>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
            </div>
        </div>

        <!-- Right Column: Insights & Actions -->
        <div class="insights-column">
            <!-- Category Distribution (Doughnut Mock) -->
            <mat-card class="insights-card">
                <mat-card-header>
                    <mat-card-title>Répartition des Boutiques</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <div class="mock-doughnut-container">
                        <div class="doughnut-circle">
                            <div class="center-text">
                                <span class="num">{{ stats[0]?.value || '0' }}</span>
                                <span class="lab">Total</span>
                            </div>
                        </div>
                        <div class="doughnut-legend">
                            <div *ngFor="let cat of categoriesData" class="legend-item">
                                <div class="legend-dot" [style.background-color]="cat.color"></div>
                                <span class="legend-label">{{ cat.label }}</span>
                                <span class="legend-value">{{ cat.value }}%</span>
                            </div>
                        </div>
                    </div>
                </mat-card-content>
            </mat-card>

            <!-- Quick Actions -->
            <div class="shortcut-grid">
                <button mat-ripple class="shortcut-btn" routerLink="/admin/shops">
                    <mat-icon>add_business</mat-icon>
                    <span>Ajouter Boutique</span>
                </button>
                <button mat-ripple class="shortcut-btn" routerLink="/admin/events">
                    <mat-icon>event_available</mat-icon>
                    <span>Créer Événement</span>
                </button>
                <button mat-ripple class="shortcut-btn" (click)="exportPDF()">
                    <mat-icon>assessment</mat-icon>
                    <span>Rapport PDF</span>
                </button>
                <button mat-ripple class="shortcut-btn">
                    <mat-icon>settings</mat-icon>
                    <span>Paramètres</span>
                </button>
            </div>
        </div>
    </div>
</div>